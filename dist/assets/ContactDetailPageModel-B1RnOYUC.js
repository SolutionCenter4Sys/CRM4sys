import{r as x,e as at,_ as it,Y as rt,f as ne,j as e,i as nt,l as lt,s as ct,x as j,Z as dt,$ as xt,u as mt,B as o,C as ht,T as s,W as pt,a0 as Be,a1 as De,a2 as ut,a3 as M,a4 as W,D as k,b as F,R as Ve,U as _e,F as oe,I as ae,S as ie,m as y}from"./index-D1WZwRG5.js";import{A as jt,M as bt,g as gt}from"./mockContactPhoto-D_ACF6zO.js";import{A as $}from"./Alert-C2uN4Clt.js";import{B as C}from"./Button-BhZ-lD3l.js";import{A as ft}from"./ArrowBack-ChqsaD63.js";import{E as Ue}from"./ExpandMore-G5mcugwg.js";import{g as vt,M as q}from"./MenuItem-C9hTkJKZ.js";import{T as yt,a as G}from"./Tabs-CY_i16F1.js";import{A as re}from"./Add-CgRR7ozh.js";import"./KeyboardArrowRight-DRYK2Ozh.js";const It=["className"],St=h=>{const{alignItems:v,classes:b}=h;return lt({root:["root",v==="flex-start"&&"alignItemsFlexStart"]},vt,b)},wt=ct("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(h,v)=>{const{ownerState:b}=h;return[v.root,b.alignItems==="flex-start"&&v.alignItemsFlexStart]}})(({theme:h,ownerState:v})=>ne({minWidth:56,color:(h.vars||h).palette.action.active,flexShrink:0,display:"inline-flex"},v.alignItems==="flex-start"&&{marginTop:8})),Ct=x.forwardRef(function(v,b){const d=at({props:v,name:"MuiListItemIcon"}),{className:O}=d,a=it(d,It),N=x.useContext(rt),B=ne({},d,{alignItems:N.alignItems}),D=St(B);return e.jsx(wt,ne({className:nt(D.root,O),ownerState:B,ref:b},a))}),At=j(e.jsx("path",{d:"M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79zm9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75zM7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1"}),"CallOutlined"),zt=j(e.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight"),kt=j(e.jsx("path",{d:"M3 10h11v2H3zm0-2h11V6H3zm0 8h7v-2H3zm15.01-3.13.71-.71c.39-.39 1.02-.39 1.41 0l.71.71c.39.39.39 1.02 0 1.41l-.71.71zm-.71.71-5.3 5.3V21h2.12l5.3-5.3z"}),"EditNoteOutlined"),Et=j(e.jsx("path",{d:"M22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2zm-2 0-8 5-8-5zm0 12H4V8l8 5 8-5z"}),"EmailOutlined"),Rt=j(e.jsx("path",{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 16H5V10h14zm0-12H5V6h14zm-7 5h5v5h-5z"}),"EventOutlined"),Lt=j(e.jsx("path",{d:"M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"}),"LinkedIn"),Ft=j(e.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2M9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9zm9 14H6V10h12zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2"}),"LockOutlined"),Nt=j(e.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 14H4V8l8 5 8-5zm-8-7L4 6h16z"}),"MailOutline"),Mt=j(e.jsx("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreHoriz"),Wt=j(e.jsx("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"}),"OpenInNew"),Ot=j([e.jsx("path",{d:"M17 19.22H5V7h7V5H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-7h-2z"},"0"),e.jsx("path",{d:"M19 2h-2v3h-3c.01.01 0 2 0 2h3v2.99c.01.01 2 0 2 0V7h3V5h-3zM7 9h8v2H7zm0 3v2h8v-2h-3zm0 3h8v2H7z"},"1")],"PostAddOutlined"),Pt=j(e.jsx("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m0 14H5.17L4 17.17V4h16zM7 9h2v2H7zm8 0h2v2h-2zm-4 0h2v2h-2z"}),"SmsOutlined"),Tt=j(e.jsx("path",{d:"M22 5.18 10.59 16.6l-4.24-4.24 1.41-1.41 2.83 2.83 10-10zm-2.21 5.04c.13.57.21 1.17.21 1.78 0 4.42-3.58 8-8 8s-8-3.58-8-8 3.58-8 8-8c1.58 0 3.04.46 4.28 1.25l1.44-1.44C16.1 2.67 14.13 2 12 2 6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10c0-1.19-.22-2.33-.6-3.39z"}),"TaskAltOutlined"),$t=j(e.jsx("path",{d:"M16.75 13.96c.25.13.41.2.46.3.06.11.04.61-.21 1.18-.2.56-1.24 1.1-1.7 1.12-.46.02-.47.36-2.96-.73-2.49-1.09-3.99-3.75-4.11-3.92-.12-.17-.96-1.38-.92-2.61.05-1.22.69-1.8.95-2.04.24-.26.51-.29.68-.26h.47c.15 0 .36-.06.55.45l.69 1.87c.06.13.1.28.01.44l-.27.41-.39.42c-.12.12-.26.25-.12.5.12.26.62 1.09 1.32 1.78.91.88 1.71 1.17 1.95 1.3.24.14.39.12.54-.04l.81-.94c.19-.25.35-.19.58-.11l1.67.88M12 2a10 10 0 0 1 10 10 10 10 0 0 1-10 10c-1.97 0-3.8-.57-5.35-1.55L2 22l1.55-4.65A9.969 9.969 0 0 1 2 12 10 10 0 0 1 12 2m0 2a8 8 0 0 0-8 8c0 1.72.54 3.31 1.46 4.61L4.5 19.5l2.89-.96A7.95 7.95 0 0 0 12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8z"}),"WhatsApp"),Q=({children:h,value:v,index:b})=>v===b?e.jsx(o,{sx:{py:1.2},children:h}):null,m="#D8E1EB",w="#FFFFFF",I="#31556E",c="#4F7188",H={subscriber:"Subscriber",lead:"Lead",mql:"MQL",sql:"SQL",opportunity:"Oportunidade",customer:"Cliente",evangelist:"Evangelista"},Jt=()=>{var Se,we,Ce,Ae,ze,ke,Ee,Re,Le,Fe,Ne,Me,We,Oe,Pe,Te;const{id:h}=dt(),v=xt(),b=mt(),d=h==="new",O=new URLSearchParams(v.search).get("edit")==="1",[a,N]=x.useState(null),[B,D]=x.useState(!0),[le,ce]=x.useState(null),[P,qe]=x.useState(0),[K,V]=x.useState([]),[_,de]=x.useState([]),[xe,Ge]=x.useState([]),[A,Qe]=x.useState([]),[S,U]=x.useState(d||O),[me,Y]=x.useState(null),[he,pe]=x.useState(null),[ue,E]=x.useState(null),[je,R]=x.useState(null),[be,ge]=x.useState(!1),[fe,J]=x.useState(null),[ve,Z]=x.useState(null),[ye,X]=x.useState(""),[n,ee]=x.useState({firstName:"",lastName:"",email:"",phone:"",mobilePhone:"",jobTitle:"",department:"",lifecycleStage:"lead",leadSource:"",accountId:"",ownerId:"",tags:[]});x.useEffect(()=>{if(!h)return;(async()=>{try{D(!0),ce(null);const[r,l]=await Promise.all([y.accounts.list(),y.users.list()]);if(Ge(r.data||[]),Qe(l.data||[]),d){N(null),V([]),de([]),U(!0),ee(ot=>{var $e,He;return{...ot,ownerId:((He=($e=l.data)==null?void 0:$e[0])==null?void 0:He.id)||"",accountId:""}});return}U(O);const p=await y.contacts.getById(h),[g,f]=await Promise.all([y.activities.listByContact(h),y.deals.listByContact(h)]),u=p.data||null;N(u),V(g.data||[]),de(f.data||[]),u&&ee({firstName:u.firstName,lastName:u.lastName,email:u.email,phone:u.phone||"",mobilePhone:u.mobilePhone||"",jobTitle:u.jobTitle||"",department:u.department||"",lifecycleStage:u.lifecycleStage,leadSource:u.leadSource||"",accountId:u.accountId||"",ownerId:u.ownerId||"",tags:u.tags||[]})}catch(r){ce(r instanceof Error?r.message:"Erro ao carregar contato")}finally{D(!1)}})()},[h,d,O]);const te=x.useMemo(()=>{const t=new Map;return[...K].sort((r,l)=>new Date(l.activityDate).getTime()-new Date(r.activityDate).getTime()).forEach(r=>{const l=new Intl.DateTimeFormat("pt-BR",{month:"long",year:"numeric"}).format(new Date(r.activityDate));t.set(l,[...t.get(l)||[],r])}),Array.from(t.entries())},[K]),Ie=_.filter(t=>t.status==="open"),Ke=Ie.reduce((t,r)=>t+r.amount,0),L=_[0],se=(we=(Se=te[0])==null?void 0:Se[1])==null?void 0:we[0],i=a||{firstName:n.firstName||"Novo",lastName:n.lastName||"Contato",fullName:`${n.firstName||"Novo"} ${n.lastName||"Contato"}`.trim(),email:n.email||"email@empresa.com",phone:n.phone,mobilePhone:n.mobilePhone,jobTitle:n.jobTitle||"Contato",department:n.department,lifecycleStage:n.lifecycleStage||"lead",leadSource:n.leadSource,ownerId:n.ownerId||((Ce=A[0])==null?void 0:Ce.id)||"",owner:A.find(t=>t.id===n.ownerId)||A[0],accountId:n.accountId||void 0,account:xe.find(t=>t.id===n.accountId),leadScore:0,tags:n.tags||[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},Ye=i?se?`Recentemente, ${i.fullName} interagiu em "${se.subject}" (${se.type}). Há ${K.length} atividade(s) registrada(s), sugerindo bom contexto para próximo passo comercial.`:`Ainda não há atividades para ${i.fullName}. Sugerimos iniciar uma ligação de descoberta e registrar as necessidades do cliente.`:"",z=(t,r)=>{ee(l=>({...l,[t]:r}))},Je=!!ve,Ze=[{id:"linkedin",label:"Envolva-se no LinkedIn",icon:e.jsx(Lt,{fontSize:"small"})},{id:"whatsapp",label:"Criar uma mensagem do WhatsApp",icon:e.jsx($t,{fontSize:"small"}),locked:!0},{id:"sms",label:"Registrar SMS",icon:e.jsx(Pt,{fontSize:"small"})},{id:"post",label:"Registrar correio postal",icon:e.jsx(Ot,{fontSize:"small"})},{id:"email",label:"Registrar um e-mail",icon:e.jsx(Nt,{fontSize:"small"})}].filter(t=>t.label.toLowerCase().includes(ye.trim().toLowerCase())),Xe=!!fe,et=async t=>{var p,g;if(!(a!=null&&a.id)){E("Salve o contato antes de registrar atividades.");return}const l={linkedin:{type:"note",subject:"Interação no LinkedIn",description:"Engajamento registrado via ação rápida do contato."},whatsapp:{type:"whatsapp",subject:"Mensagem de WhatsApp registrada",description:"Mensagem de WhatsApp iniciada pelo menu de ações rápidas."},sms:{type:"sms",subject:"SMS registrado",description:"Registro de envio de SMS pelo menu de ações rápidas."},post:{type:"note",subject:"Correio postal registrado",description:"Ação de correio postal registrada no contato."},email:{type:"email",subject:"E-mail registrado",description:"Registro de e-mail realizado pelo menu de ações rápidas."}}[t];if(l)try{E(null);const f=await y.activities.create({type:l.type,subject:l.subject,description:l.description,relatedContactId:a.id,relatedAccountId:a.accountId,relatedDealId:(p=_[0])==null?void 0:p.id,userId:a.ownerId||((g=A[0])==null?void 0:g.id)||"",user:a.owner||A[0],isSystemGenerated:!1,metadata:{source:"contact_quick_actions",action:t}});f.data&&(V(u=>[f.data,...u]),R(`${l.subject} adicionada ao histórico.`)),Z(null),X("")}catch(f){E(f instanceof Error?f.message:"Erro ao registrar atividade")}},T=async t=>{var r,l;if(!(a!=null&&a.id)){E("Salve o contato antes de executar ações.");return}try{if(E(null),R(null),t==="import_linkedin"){const p=await y.contacts.update(a.id,{leadSource:"LinkedIn Import",tags:Array.from(new Set([...a.tags||[],"LinkedIn"])),customFields:{...a.customFields||{},linkedinImportedAt:new Date().toISOString(),linkedinProfile:`https://linkedin.com/in/${a.firstName.toLowerCase()}-${a.lastName.toLowerCase()}`}});p.data&&N(p.data);const g=await y.activities.create({type:"enrichment",subject:"Importação de dados do LinkedIn",description:"Dados do contato enriquecidos a partir do LinkedIn.",relatedContactId:a.id,relatedAccountId:a.accountId,userId:a.ownerId||((r=A[0])==null?void 0:r.id)||"",user:a.owner||A[0],isSystemGenerated:!1,metadata:{source:"linkedin_import"}});g.data&&V(f=>[g.data,...f]),R("Dados do LinkedIn importados com sucesso.")}else if(t==="clone"){const p={firstName:`${a.firstName} (Cópia)`,lastName:a.lastName,email:`copia+${Date.now()}_${a.email}`,phone:a.phone,mobilePhone:a.mobilePhone,jobTitle:a.jobTitle,department:a.department,accountId:a.accountId,ownerId:a.ownerId,lifecycleStage:a.lifecycleStage,leadSource:a.leadSource,tags:a.tags,customFields:a.customFields},g=await y.contacts.create(p);R("Contato clonado com sucesso."),(l=g.data)!=null&&l.id&&b(`/contacts/${g.data.id}?edit=1`)}else if(t==="delete"){if(!window.confirm("Deseja excluir este contato?"))return;await y.contacts.delete(a.id),b("/contacts");return}else if(t==="export"){const p=new Blob([JSON.stringify(a,null,2)],{type:"application/json;charset=utf-8;"}),g=URL.createObjectURL(p),f=document.createElement("a");f.href=g,f.download=`contato_${a.id}.json`,f.click(),URL.revokeObjectURL(g),R("Dados do contato exportados.")}else if(t==="google"){const p=encodeURIComponent(`${a.fullName} ${a.email}`);window.open(`https://www.google.com/search?q=${p}`,"_blank")}else R("Ação registrada no mock.")}catch(p){E(p instanceof Error?p.message:"Erro ao executar ação")}finally{J(null)}},tt=()=>{var t,r,l;return(t=n.firstName)!=null&&t.trim()?(r=n.lastName)!=null&&r.trim()?(l=n.email)!=null&&l.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)?null:"E-mail inválido.":"E-mail é obrigatório.":"Sobrenome é obrigatório.":"Primeiro nome é obrigatório."},st=async()=>{var r;const t=tt();if(t){Y(t);return}try{if(ge(!0),Y(null),pe(null),d){const l=await y.contacts.create({...n,accountId:n.accountId||void 0,ownerId:n.ownerId||void 0});if((r=l.data)!=null&&r.id){b(`/contacts/${l.data.id}`);return}}else if(h){const l=await y.contacts.update(h,{...n,accountId:n.accountId||void 0,ownerId:n.ownerId||void 0});l.data&&N(l.data),U(!1),pe("Contato atualizado com sucesso.")}}catch(l){Y(l instanceof Error?l.message:"Erro ao salvar contato")}finally{ge(!1)}};return B?e.jsx(o,{sx:{minHeight:"60vh",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ht,{})}):le||!a&&!d?e.jsx(o,{sx:{p:2},children:e.jsxs($,{severity:"error",children:[le||"Contato não encontrado",e.jsx(C,{size:"small",onClick:()=>b("/contacts"),sx:{ml:1.5},children:"Voltar para lista"})]})}):e.jsxs(o,{sx:{p:{xs:1,md:1.5},bgcolor:"#F5F8FA"},children:[e.jsx(C,{startIcon:e.jsx(ft,{}),onClick:()=>b("/contacts"),size:"small",sx:{color:"#2A8BA8",mb:.8},children:"Contatos"}),e.jsxs(o,{sx:{border:`1px solid ${m}`,borderRadius:1.2,overflow:"hidden",display:"grid",gridTemplateColumns:{xs:"1fr",xl:"368px 1fr 300px"}},children:[e.jsxs(o,{sx:{borderRight:{xl:`1px solid ${m}`},bgcolor:"#F9FBFC"},children:[e.jsxs(o,{sx:{px:2,py:1.25,display:"flex",justifyContent:"space-between"},children:[e.jsx(s,{variant:"caption",sx:{color:c,fontWeight:600},children:"< Contatos"}),e.jsxs(C,{size:"small",variant:"text",sx:{color:c,fontWeight:600,minWidth:"auto",p:0},onClick:t=>J(t.currentTarget),children:["Ações ",e.jsx(Ue,{sx:{fontSize:14,ml:.2,mb:-.3}})]})]}),e.jsxs(o,{sx:{px:2,pb:1.6},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1.2},children:[e.jsx(jt,{src:gt(d?n.email||n.firstName:i.id),alt:i.fullName,sx:{width:64,height:64,border:`1px solid ${m}`},imgProps:{referrerPolicy:"no-referrer",onError:t=>{const r=t.currentTarget;r.onerror=null,r.src=bt}}}),e.jsxs(o,{children:[e.jsx(s,{variant:"h6",sx:{color:I,fontWeight:700,lineHeight:1.15,fontSize:{xs:28,xl:30},display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",maxWidth:{xs:240,xl:260}},children:i.fullName}),e.jsx(s,{variant:"body1",sx:{color:c,lineHeight:1.25,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",maxWidth:{xs:240,xl:260}},children:i.jobTitle||"Contato"}),e.jsx(s,{variant:"body2",sx:{color:"#2A8BA8",fontWeight:700,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:{xs:240,xl:260}},children:i.email})]})]}),e.jsx(o,{sx:{display:"grid",gridTemplateColumns:"repeat(6, 1fr)",gap:.8,mt:1.4},children:[{label:"Obse.",icon:e.jsx(kt,{fontSize:"small"})},{label:"E-mail",icon:e.jsx(Et,{fontSize:"small"})},{label:"Cham.",icon:e.jsx(At,{fontSize:"small"})},{label:"Tarefa",icon:e.jsx(Tt,{fontSize:"small"})},{label:"Reuni.",icon:e.jsx(Rt,{fontSize:"small"})},{label:"Mais",icon:e.jsx(Mt,{fontSize:"small"}),id:"more"}].map(t=>e.jsxs(o,{sx:{textAlign:"center"},children:[e.jsx(pt,{size:"small",sx:{width:34,height:34,bgcolor:"#EFF4F8",border:`1px solid ${m}`},onClick:r=>{t.id==="more"&&Z(r.currentTarget)},children:t.icon}),e.jsx(s,{variant:"body2",sx:{color:c,display:"block",mt:.4},children:t.label})]},t.label))})]}),e.jsx(Be,{open:Xe,anchorEl:fe,onClose:()=>J(null),anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:300,border:`1px solid ${m}`,borderRadius:2,overflow:"hidden",mt:.8}},children:e.jsxs(De,{disablePadding:!0,children:[[{id:"follow",label:"Seguir"},{id:"all_properties",label:"Exibir todas as propriedades"},{id:"property_history",label:"Exibir histórico da propriedade"},{id:"association_history",label:"Ver histórico de associação"},{id:"summarize",label:"Resumir"}].map((t,r)=>e.jsxs(ut.Fragment,{children:[e.jsx(M,{onClick:()=>T(t.id),children:e.jsx(W,{primary:t.label})}),r===0||r===3?e.jsx(k,{}):null]},t.id)),e.jsx(k,{}),[{id:"google",label:"Pesquisa no Google ↗"},{id:"unsubscribe",label:"Optar por não receber email"}].map(t=>e.jsx(M,{onClick:()=>T(t.id),children:e.jsx(W,{primary:t.label})},t.id)),e.jsx(k,{}),[{id:"restore_activity",label:"Restaurar atividade ↗"},{id:"merge",label:"Mesclar"},{id:"clone",label:"Clonar"},{id:"delete",label:"Excluir"}].map(t=>e.jsx(M,{onClick:()=>T(t.id),children:e.jsx(W,{primary:t.label,primaryTypographyProps:{color:t.id==="delete"?"error.main":"text.primary"}})},t.id)),e.jsx(k,{}),e.jsx(M,{onClick:()=>T("export"),children:e.jsx(W,{primary:"Exportar dados de contato"})}),e.jsx(M,{onClick:()=>T("import_linkedin"),children:e.jsx(W,{primary:"Importar dados do LinkedIn"})})]})}),e.jsxs(Be,{open:Je,anchorEl:ve,onClose:()=>{Z(null),X("")},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:410,maxWidth:"calc(100vw - 24px)",border:`1px solid ${m}`,borderRadius:2,overflow:"hidden",mt:1}},children:[e.jsx(o,{sx:{p:1.25,borderBottom:`1px solid ${m}`},children:e.jsx(F,{size:"small",fullWidth:!0,placeholder:"Pesquisar",value:ye,onChange:t=>X(t.target.value),InputProps:{endAdornment:e.jsx(Ve,{position:"end",children:e.jsx(_e,{fontSize:"small"})})}})}),e.jsx(De,{dense:!0,disablePadding:!0,sx:{maxHeight:290,overflowY:"auto"},children:Ze.map(t=>e.jsxs(M,{sx:{py:1},onClick:()=>et(t.id),children:[e.jsx(Ct,{sx:{minWidth:34,color:"text.primary"},children:t.icon}),e.jsx(W,{primary:t.label}),t.id==="whatsapp"&&e.jsx(Ft,{sx:{fontSize:16,color:"text.secondary",mr:.5}}),e.jsx(zt,{sx:{fontSize:18,color:"text.secondary"}})]},t.id))}),e.jsx(o,{sx:{px:1.5,py:1.1,borderTop:`1px solid ${m}`,bgcolor:"#FAFBFC"},children:e.jsx(s,{variant:"subtitle2",sx:{color:"#1F3447",fontWeight:700},children:"Reordenar botões de atividade"})})]}),e.jsx(k,{}),e.jsxs(o,{sx:{px:2,py:1.6},children:[e.jsxs(s,{variant:"subtitle2",sx:{color:"#2A8BA8",fontWeight:700,mb:1},children:[e.jsx(Ue,{sx:{fontSize:16,mb:-.4}})," Informações importantes"]}),[["E-mail",i.email],["Número de telefone",i.mobilePhone||i.phone||"--"],["Nome da empresa",((Ae=i.account)==null?void 0:Ae.name)||"--"],["Status do lead",H[i.lifecycleStage]],["Fase do ciclo de vida",H[i.lifecycleStage]],["Função de compra",i.buyingCommitteeRole||"--"],["Proprietário do contato",((ze=i.owner)==null?void 0:ze.fullName)||"--"]].map(([t,r])=>e.jsxs(o,{sx:{mb:1},children:[e.jsx(s,{variant:"body2",sx:{color:c,fontWeight:700},children:t}),e.jsx(s,{variant:"body1",sx:{fontWeight:500,lineHeight:1.3,wordBreak:"break-word"},children:r})]},t))]})]}),e.jsxs(o,{sx:{borderRight:{xl:`1px solid ${m}`},bgcolor:"#F5F8FA"},children:[e.jsxs(o,{sx:{px:1.4,py:1,bgcolor:w,borderBottom:`1px solid ${m}`},children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",gap:1,alignItems:"center"},children:[e.jsxs(yt,{value:P,onChange:(t,r)=>qe(r),variant:"scrollable",scrollButtons:"auto",sx:{minHeight:32,"& .MuiTab-root":{minHeight:32,px:1.3,color:c,fontWeight:600},"& .Mui-selected":{color:I},"& .MuiTabs-indicator":{bgcolor:"#1F3447",height:2.5}},children:[e.jsx(G,{label:"Sobre"}),e.jsx(G,{label:"Atividades"}),e.jsx(G,{label:"Receita"}),e.jsx(G,{label:"Inteligência"})]}),e.jsxs(o,{sx:{display:"flex",gap:.8},children:[!d&&!S&&e.jsx(C,{size:"small",variant:"outlined",sx:{minWidth:"auto"},onClick:()=>U(!0),children:"Editar"}),(d||S)&&e.jsx(C,{size:"small",variant:"contained",sx:{minWidth:"auto"},onClick:st,disabled:be,children:be?"Salvando...":d?"Criar contato":"Salvar"})]})]}),e.jsx(o,{sx:{display:"flex",justifyContent:"flex-end",mt:1},children:e.jsx(F,{size:"small",placeholder:"Pesquisar atividades",sx:{width:230},InputProps:{startAdornment:e.jsx(Ve,{position:"start",children:e.jsx(_e,{fontSize:"small",sx:{color:"#2A8BA8"}})})}})})]}),e.jsx(Q,{value:P,index:0,children:e.jsxs(o,{sx:{px:1.4},children:[ue&&e.jsx($,{severity:"error",sx:{mb:1},onClose:()=>E(null),children:ue}),je&&e.jsx($,{severity:"success",sx:{mb:1},onClose:()=>R(null),children:je}),me&&e.jsx($,{severity:"error",sx:{mb:1},children:me}),he&&e.jsx($,{severity:"success",sx:{mb:1},children:he}),e.jsxs(o,{sx:{border:`1px solid ${m}`,borderRadius:1,bgcolor:w,p:1.5},children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(s,{variant:"subtitle1",sx:{color:I,fontWeight:700},children:"Resumo do registro de interações"}),e.jsx(o,{sx:{px:.8,py:.2,borderRadius:.8,bgcolor:"#F03A9B",color:"#fff",fontSize:10,fontWeight:700},children:"AUTO"})]}),e.jsxs(o,{sx:{border:"1px solid #F0B8D8",borderRadius:1,p:1.3,bgcolor:"#FFF9FD"},children:[e.jsxs(s,{variant:"caption",sx:{color:c},children:["Gerado em ",new Date().toLocaleDateString("pt-BR")]}),e.jsx(s,{variant:"body2",sx:{mt:.7,color:"#31475A"},children:Ye})]})]}),e.jsxs(o,{sx:{border:`1px solid ${m}`,borderRadius:1,bgcolor:w,p:1.5,mt:1.2},children:[e.jsx(s,{variant:"subtitle1",sx:{color:I,fontWeight:700,mb:1.2},children:"Perfil de contato"}),e.jsxs(o,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr 1fr",md:"repeat(4, 1fr)"},gap:1.2},children:[e.jsxs(o,{children:[e.jsx(s,{variant:"caption",sx:{color:c},children:"Nome da empresa"}),d||S?e.jsxs(oe,{size:"small",fullWidth:!0,children:[e.jsx(ae,{children:"Empresa"}),e.jsxs(ie,{label:"Empresa",value:n.accountId||"",onChange:t=>z("accountId",t.target.value),children:[e.jsx(q,{value:"",children:"Nenhuma"}),xe.map(t=>e.jsx(q,{value:t.id,children:t.name},t.id))]})]}):e.jsx(s,{variant:"body2",children:((ke=i.account)==null?void 0:ke.name)||"--"})]}),e.jsxs(o,{children:[e.jsx(s,{variant:"caption",sx:{color:c},children:"Endereço"}),e.jsx(s,{variant:"body2",children:((Re=(Ee=i.account)==null?void 0:Ee.address)==null?void 0:Re.street)||"--"})]}),e.jsxs(o,{children:[e.jsx(s,{variant:"caption",sx:{color:c},children:"Cidade"}),e.jsx(s,{variant:"body2",children:((Fe=(Le=i.account)==null?void 0:Le.address)==null?void 0:Fe.city)||"--"})]}),e.jsxs(o,{children:[e.jsx(s,{variant:"caption",sx:{color:c},children:"Código postal"}),e.jsx(s,{variant:"body2",children:((Me=(Ne=i.account)==null?void 0:Ne.address)==null?void 0:Me.zipCode)||"--"})]}),e.jsxs(o,{children:[e.jsx(s,{variant:"caption",sx:{color:c},children:"Estado/Região"}),e.jsx(s,{variant:"body2",children:((Oe=(We=i.account)==null?void 0:We.address)==null?void 0:Oe.state)||"--"})]}),e.jsxs(o,{children:[e.jsx(s,{variant:"caption",sx:{color:c},children:"E-mail"}),d||S?e.jsx(F,{size:"small",value:n.email,onChange:t=>z("email",t.target.value),fullWidth:!0}):e.jsx(s,{variant:"body2",children:i.email})]}),e.jsxs(o,{children:[e.jsx(s,{variant:"caption",sx:{color:c},children:"Primeiro nome"}),d||S?e.jsx(F,{size:"small",value:n.firstName,onChange:t=>z("firstName",t.target.value),fullWidth:!0}):e.jsx(s,{variant:"body2",children:i.firstName})]}),e.jsxs(o,{children:[e.jsx(s,{variant:"caption",sx:{color:c},children:"Sobrenome"}),d||S?e.jsx(F,{size:"small",value:n.lastName,onChange:t=>z("lastName",t.target.value),fullWidth:!0}):e.jsx(s,{variant:"body2",children:i.lastName})]}),e.jsxs(o,{children:[e.jsx(s,{variant:"caption",sx:{color:c},children:"Celular"}),d||S?e.jsx(F,{size:"small",value:n.mobilePhone||"",onChange:t=>z("mobilePhone",t.target.value),fullWidth:!0}):e.jsx(s,{variant:"body2",children:i.mobilePhone||"--"})]}),e.jsxs(o,{children:[e.jsx(s,{variant:"caption",sx:{color:c},children:"Cargo"}),d||S?e.jsx(F,{size:"small",value:n.jobTitle||"",onChange:t=>z("jobTitle",t.target.value),fullWidth:!0}):e.jsx(s,{variant:"body2",children:i.jobTitle||"--"})]}),e.jsxs(o,{children:[e.jsx(s,{variant:"caption",sx:{color:c},children:"Lifecycle"}),d||S?e.jsxs(oe,{size:"small",fullWidth:!0,children:[e.jsx(ae,{children:"Lifecycle"}),e.jsx(ie,{label:"Lifecycle",value:n.lifecycleStage||"lead",onChange:t=>z("lifecycleStage",t.target.value),children:Object.keys(H).map(t=>e.jsx(q,{value:t,children:H[t]},t))})]}):e.jsx(s,{variant:"body2",children:H[i.lifecycleStage]})]}),e.jsxs(o,{children:[e.jsx(s,{variant:"caption",sx:{color:c},children:"Proprietário"}),d||S?e.jsxs(oe,{size:"small",fullWidth:!0,children:[e.jsx(ae,{children:"Owner"}),e.jsx(ie,{label:"Owner",value:n.ownerId||"",onChange:t=>z("ownerId",t.target.value),children:A.map(t=>e.jsx(q,{value:t.id,children:t.fullName},t.id))})]}):e.jsx(s,{variant:"body2",children:((Pe=i.owner)==null?void 0:Pe.fullName)||"--"})]})]})]})]})}),e.jsx(Q,{value:P,index:1,children:e.jsx(o,{sx:{px:1.4},children:te.length===0?e.jsx(o,{sx:{border:`1px solid ${m}`,bgcolor:w,p:2,borderRadius:1},children:e.jsx(s,{variant:"body2",sx:{color:c},children:"Nenhuma atividade encontrada para este contato."})}):te.map(([t,r])=>e.jsxs(o,{sx:{mb:1.8},children:[e.jsx(s,{variant:"subtitle1",sx:{color:I,fontWeight:700,mb:.8,textTransform:"capitalize"},children:t}),e.jsx(o,{sx:{display:"grid",gap:.9},children:r.map(l=>e.jsxs(o,{sx:{border:`1px solid ${m}`,bgcolor:w,p:1.2,borderRadius:1},children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",gap:1.5},children:[e.jsx(s,{variant:"body2",sx:{fontWeight:700,color:I},children:l.subject}),e.jsx(s,{variant:"caption",sx:{color:c,fontWeight:600},children:new Date(l.activityDate).toLocaleString("pt-BR")})]}),l.description&&e.jsx(s,{variant:"body2",sx:{mt:.5,color:"#31475A"},children:l.description})]},l.id))})]},t))})}),e.jsx(Q,{value:P,index:2,children:e.jsx(o,{sx:{px:1.4},children:e.jsxs(o,{sx:{border:`1px solid ${m}`,borderRadius:1,bgcolor:w,p:1.5},children:[e.jsx(s,{variant:"subtitle1",sx:{color:I,fontWeight:700},children:"Receita associada ao contato"}),e.jsxs(s,{variant:"body2",sx:{color:c,mt:.8},children:["Negócios abertos: ",Ie.length]}),e.jsxs(s,{variant:"body2",sx:{color:c,mt:.2},children:["Valor total aberto: R$ ",Ke.toLocaleString("pt-BR")]}),e.jsxs(s,{variant:"body2",sx:{color:c,mt:.2},children:["Principal negócio: ",(L==null?void 0:L.title)||"--"]})]})})}),e.jsx(Q,{value:P,index:3,children:e.jsx(o,{sx:{px:1.4},children:e.jsxs(o,{sx:{border:`1px solid ${m}`,borderRadius:1,bgcolor:w,p:1.5},children:[e.jsx(s,{variant:"subtitle1",sx:{color:I,fontWeight:700},children:"Inteligência do contato"}),e.jsxs(s,{variant:"body2",sx:{color:c,mt:.8},children:["Lead score atual: ",i.leadScore]}),e.jsxs(s,{variant:"body2",sx:{color:c,mt:.2},children:["Fonte do lead: ",i.leadSource||"--"]}),e.jsxs(s,{variant:"body2",sx:{color:c,mt:.2},children:["Última atividade: ",i.lastActivityAt?new Date(i.lastActivityAt).toLocaleString("pt-BR"):"--"]})]})})})]}),e.jsxs(o,{sx:{bgcolor:"#F8FAFC",p:1},children:[e.jsxs(o,{sx:{border:`1px solid ${m}`,borderRadius:1,bgcolor:w,mb:1},children:[e.jsxs(o,{sx:{px:1.2,py:.9,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(s,{variant:"subtitle2",sx:{color:I,fontWeight:700},children:["Empresas (",i.account?1:0,")"]}),e.jsx(C,{size:"small",startIcon:e.jsx(re,{}),sx:{color:"#1F3447"},children:"Adicionar"})]}),e.jsx(k,{}),e.jsx(o,{sx:{p:1.2},children:i.account?e.jsxs(o,{sx:{border:`1px solid ${m}`,borderRadius:1,p:1},children:[e.jsx(s,{variant:"body2",sx:{fontWeight:700,color:"#1F6F87"},children:i.account.name}),e.jsxs(s,{variant:"caption",sx:{color:c,display:"block",mt:.5},children:["Nome de domínio: ",i.account.domain||"--"]}),e.jsxs(s,{variant:"caption",sx:{color:c,display:"block",mt:.2},children:["Telefone: ",i.phone||"--"]}),e.jsx(C,{size:"small",sx:{mt:.6,px:0,minWidth:"auto",color:"#1F6F87"},endIcon:e.jsx(Wt,{sx:{fontSize:14}}),children:"Adicionar rótulo de associação"})]}):e.jsx(s,{variant:"body2",sx:{color:c},children:"Nenhuma empresa associada"})})]}),e.jsxs(o,{sx:{border:`1px solid ${m}`,borderRadius:1,bgcolor:w,mb:1},children:[e.jsxs(o,{sx:{px:1.2,py:.9,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(s,{variant:"subtitle2",sx:{color:I,fontWeight:700},children:["Negócios (",_.length,")"]}),e.jsx(C,{size:"small",startIcon:e.jsx(re,{}),sx:{color:"#1F3447"},children:"Adicionar"})]}),e.jsx(k,{}),e.jsx(o,{sx:{p:1.2},children:L?e.jsxs(o,{sx:{border:`1px solid ${m}`,borderRadius:1,p:1},children:[e.jsx(s,{variant:"body2",sx:{fontWeight:700,color:"#1F6F87"},children:L.title}),e.jsxs(s,{variant:"caption",sx:{color:c,display:"block",mt:.5},children:["Valor: R$ ",L.amount.toLocaleString("pt-BR")]}),e.jsxs(s,{variant:"caption",sx:{color:c,display:"block",mt:.2},children:["Etapa: ",((Te=L.stage)==null?void 0:Te.name)||"--"]})]}):e.jsx(s,{variant:"body2",sx:{color:c},children:"Nenhum negócio associado"})})]}),e.jsxs(o,{sx:{border:`1px solid ${m}`,borderRadius:1,bgcolor:w},children:[e.jsxs(o,{sx:{px:1.2,py:.9,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(s,{variant:"subtitle2",sx:{color:I,fontWeight:700},children:"Tickets (0)"}),e.jsx(C,{size:"small",startIcon:e.jsx(re,{}),sx:{color:"#1F3447"},children:"Adicionar"})]}),e.jsx(k,{}),e.jsx(o,{sx:{p:1.2,minHeight:96},children:e.jsx(s,{variant:"body2",sx:{color:c},children:"Acompanhe as solicitações dos clientes aqui."})})]})]})]})]})};export{Jt as ContactDetailPageModel,Jt as default};
