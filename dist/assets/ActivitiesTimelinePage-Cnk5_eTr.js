import{r as a,j as s,B as i,C as y,T as r,b as T,F as S,I as w,S as D,m as L}from"./index-D1WZwRG5.js";import{M as j}from"./MenuItem-C9hTkJKZ.js";import{C as f}from"./Chip-BcfuiGLT.js";import{C as F,a as W}from"./CardContent-C09eNwcx.js";const B=["email","call","meeting","note","task","status_change","stage_change"],E=()=>{const[g,x]=a.useState(!0),[p,C]=a.useState([]),[o,v]=a.useState(""),[n,b]=a.useState("");a.useEffect(()=>{(async()=>{x(!0);const d=((await L.activities.list()).data||[]).sort((c,l)=>new Date(l.activityDate).getTime()-new Date(c.activityDate).getTime());C(d),x(!1)})()},[]);const u=a.useMemo(()=>{const e=o.trim().toLowerCase();return p.filter(t=>{var l,m,h;const d=!n||t.type===n,c=!e||t.subject.toLowerCase().includes(e)||((l=t.description)==null?void 0:l.toLowerCase().includes(e))||((h=(m=t.user)==null?void 0:m.fullName)==null?void 0:h.toLowerCase().includes(e));return d&&c})},[p,o,n]);return g?s.jsx(i,{sx:{display:"flex",justifyContent:"center",py:8},children:s.jsx(y,{})}):s.jsxs(i,{sx:{p:3},children:[s.jsx(r,{variant:"h4",sx:{fontWeight:700,mb:.5},children:"ðŸ“… Timeline 360"}),s.jsx(r,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"VisÃ£o unificada de atividades de CRM."}),s.jsxs(i,{sx:{display:"flex",gap:2,mb:3,flexWrap:"wrap"},children:[s.jsx(T,{placeholder:"Buscar atividade...",value:o,onChange:e=>v(e.target.value),size:"small",sx:{minWidth:280}}),s.jsxs(S,{size:"small",sx:{minWidth:220},children:[s.jsx(w,{children:"Tipo de atividade"}),s.jsxs(D,{label:"Tipo de atividade",value:n,onChange:e=>b(e.target.value||""),children:[s.jsx(j,{value:"",children:"Todos"}),B.map(e=>s.jsx(j,{value:e,children:e},e))]})]}),s.jsx(f,{label:`${u.length} atividade(s)`,variant:"outlined"})]}),s.jsx(i,{sx:{display:"flex",flexDirection:"column",gap:1.5},children:u.map(e=>{var t;return s.jsx(F,{children:s.jsxs(W,{children:[s.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:1},children:[s.jsxs(i,{children:[s.jsx(r,{variant:"subtitle2",sx:{fontWeight:700},children:e.subject}),s.jsxs(r,{variant:"caption",color:"text.secondary",children:[new Date(e.activityDate).toLocaleString("pt-BR")," â€¢"," ",((t=e.user)==null?void 0:t.fullName)||"Sistema"]})]}),s.jsx(f,{label:e.type,size:"small",color:e.isSystemGenerated?"default":"primary",variant:"outlined"})]}),e.description&&s.jsx(r,{variant:"body2",sx:{mt:1},children:e.description})]})},e.id)})})]})};export{E as ActivitiesTimelinePage,E as default};
